<div style='font-size:2em; color: purple; text-align: center;'><b>数据库课程设计Report</b></div>

<div style='font-size:1em; text-align: center;'><b>
    申长硕 PB22020518<br>
	腾润喆 PB22061212
</b></div>



注：所有程序已托管到`github`平台，可以直接利用如下命令

```
git clone git@github.com:Stephen-Shenc/USTC-English-Club.git
```

获取，记得配置相关数据库才可以执行

<img src='imgs/homepage.png' style='width: 60%; border-radius: 10px'>

## 一、需求分析

- **开发意义：** 随着信息技术的不断进步，越来越多的学校开始建设信息化平台。作为英语俱乐部的一员，结合课程特性创建一个英语俱乐部交流平台尤为重要。由于参与者和活动数量庞大，手工管理俱乐部的交流和活动变得越来越不切实际。利用计算机技术进行现代信息管理可以显著提高这些操作的准确性和效率
- **可行性：** 传统的俱乐部交流和活动管理常常存在准确性低、效率低等问题。计算机具有存储快、检索方便、准确性高的特点，可以有效解决这些问题，使管理过程更加顺畅和可靠

- **应用环境：**
    - **架构：** B\S (Browser/Server) 架构
    - **数据库：** `mysql  Ver 14.14 Distrib 5.7.24, for Linux (x86_64) using EditLine wrapper`
    - **技术路线：** 使用 `Django` 框架
    - **开发工具：** 使用 `PyCharm` 作为主要的开发环境，结合 `Git` 进行版本控制和协作开发

### 1.1 系统功能需求

#### 1.1.1 涉及功能/`app`

* 登陆注册
    * 用户可以通过邮箱进行注册
    * 提供用户登录、密码重置和账户管理功能
* 论坛
    * 用户可以发布帖子、评论帖子、回复评论（二级评论）、点赞等功能
    * 支持按主题分类浏览帖子
* 寻宝界面
    * 主要展示从`https://www.riddles.com/posts`爬取的各riddle，并在详情中展示对应答案，供用户体验
    * 支持按难度分类浏览Riddles
* 抽奖界面
    * 主要服务于本社团的各个活动，管理员可以在后台管理奖品及其数量，抽奖界面按照奖品个数为权重做抽奖逻辑
    * 每次抽奖可以提前输入参与人数，
* 管理员界面
    * 管理员可以审核用户注册、管理帖子、管理评论等
    * 提供对用户和内容的审核、删除等管理功能
    * 添加一个抽奖池的编辑功能，可以控制奖品及对应个数


#### 1.1.2 涉及角色

- 管理员：

- 普通用户：

### 1.2 系统功能分析







## 二、概念结构设计

### 2.1 实体关系分析

### 2.2 E-R图



## 三、逻辑结构设计

### 3.1 关系模式设计

### 3.2 数据类型定义



## 四、数据库物理设计



## 五、数据库实施和维护





## 六、功能展示



## 七、总结





# 一、需求分析



- **开发意义：**  随着信息技术不断向深入发展，越来越多的学校开始着手信息化建设。其中学生选课、成绩信息化管理就是其中重要的一块内容。学生选课与成绩信息规模大、项目条数多、信息量庞大，传统的人工管理方式显然已经无法满足要求，需要借助计算机来进行现代化信息管理，从而提高管理的准确性与高效性。
- **可行性：** 传统人工管理成绩存在诸多弊病，比如准确性低、效率低等。计算机具有存储快、查找便利、准确性高的特点，能非常好的解决人工管理的弊病。
- 应用环境：
    - Web服务器：tomcat8.5；
    - 编程工具Eclipse Java 2019-09；
    - 数据库：SQL sever 2017；
    - 技术路线： jsp+servlet+javabean；

## 1.1系统功能需求



系统功能框架介绍，处理模块描述。

- 管理员：

1. 查询教师名单；
2. 添加教师信息；
3. 修改教师信息；
4. 删除教师信息；
5. 查询学生名单；
6. 添加学生信息;
7. 修改学生信息；
8. 删除学生信息；
9. 查询课程信息；
10. 添加课程信息；
11. 修改课程信息；
12. 删除课程信息；
13. 修改登录密码；

- 教师：

1. 查看个人信息；
2. 查看任课信息；
3. 按照课程表信息开设课程；
4. 取消个人已开课的课程；
5. 按行政班级查看学生均绩及排名;
6. 按任课课程查询学生单门成绩及排名；
7. 按学年查询个人教授课程的平均成绩；
8. 录入学生成绩, 自动更新该学生已修总学分；
9. 修改登录密码；

- 学生：

1. 查看个人信息；
2. 查看本人课程；
3. 选课与退选；
4. 按学年查询考试成绩；
5. 修改登录密码；

[![图1.1.1 系统功能需求](https://camo.githubusercontent.com/a95690aae66d30c62c97efd4a30750d057fe93d3d740639d75a0f6bd543d308e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353632313932322e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730)](https://camo.githubusercontent.com/a95690aae66d30c62c97efd4a30750d057fe93d3d740639d75a0f6bd543d308e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353632313932322e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730)

## 1.2 其他性能需求



1. 分管理员、教师、学生不同身份登录，并给予不同的权限，提高系统安全性;
2. 使用前端验证保证用户的输入正确。
3. 创建触发器及存储过程，保证完整性。
4. 充分考虑系统报错情况，尽量防止系统崩溃。

# 二、概念结构设计



## 2.1实体关系分析



1. 开设班级，每个班级包含若干学生；
2. 课程由教师开设；
3. 同一门课可能有多个教师开课，一个教师在一学期可能开多门课程；
4. 需要考虑不同学年，并以学年制管理学籍；
5. 不考虑按照班级直接开课的情况，即所有课程均由学生自由选择；
6. 一个学生只能选择某位老师的开的某个课程，即学生不能同时选择同一门两个不同老师开的课程；
7. 不存在两个及以上老师联合开课的情况，即不存在两个及以上教师负责同一教学班的情况。

## 2.2 E-R图



基于以上分析可得以下E-R 图： [![在这里插入图片描述](https://camo.githubusercontent.com/c5ce19d38831c575506e5fb6915ff874269359cc0fd711018c4eb4d10fb3256e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353734333430322e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730)](https://camo.githubusercontent.com/c5ce19d38831c575506e5fb6915ff874269359cc0fd711018c4eb4d10fb3256e/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353734333430322e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730) [![在这里插入图片描述](https://camo.githubusercontent.com/bb66f9313af5c5e3640fb774e628406d6b21e9039225d9478182844f17c697a3/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353735383433312e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730)](https://camo.githubusercontent.com/bb66f9313af5c5e3640fb774e628406d6b21e9039225d9478182844f17c697a3/68747470733a2f2f696d672d626c6f672e6373646e696d672e636e2f32303230303130343135353735383433312e706e673f782d6f73732d70726f636573733d696d6167652f77617465726d61726b2c747970655f5a6d46755a33706f5a57356e6147567064476b2c736861646f775f31302c746578745f6148523063484d364c7939696247396e4c6d4e7a5a473475626d56304c33646c61586870626c38304e444d784f4445354d673d3d2c73697a655f31362c636f6c6f725f4646464646462c745f3730)

# 三、逻辑结构设计



## 3.1关系模式设计



将E-R图转换为以下关系模式：（加粗代表主键，斜体内容表示外键）

- 班级(**班级编号**, 班级名称)
- 学生(**学号**, 姓名, 性别, 年龄, 生源所在地, 已修学分总数, 登录密码, *班级编号*)
- 课程(**课程编号**, 课程名称, 学时, 考试或考查, 学分)
- 教师(**教师编号**, 姓名, 性别, 年龄, 职称, 电话, 登录密码)
- 开课情况(**开课编号**，*课程编号*, *任课教师编号*，开课学年, 开课学期，**学号**，成绩)
- 选课情况（***开课编号\*，\*学号\***，成绩）

## 3.2数据类型定义



对关系模式中的属性定义类型、长度和约束：

1. 班级

| 数据项名 | 数据类型 | 长度 | 完整性约束      | 备注 |
| -------- | -------- | ---- | --------------- | ---- |
| 班级编号 | nvarchar | 4    | 主键，唯一,非空 |      |
| 班级名称 | nvarchar | 20   | 非空            |      |

1. 学生

| 数据项名     | 数据类型 | 长度 | 完整性约束      | 备注 |
| ------------ | -------- | ---- | --------------- | ---- |
| 学号         | nvarchar | 12   | 主键，唯一,非空 |      |
| 姓名         | nvarchar | 5    | 非空            |      |
| 性别         | nvarchar | 1    | 非空            |      |
| 年龄         | int      | 4    | 非空            |      |
| 生源所在地   | nvarchar | 20   | 非空            |      |
| 已修学分总数 | float    | 4    |                 |      |
| 登录密码     | nvarchar | 20   | 非空            |      |
| 班级编号     | nvarchar | 4    | 外键，非空      |      |

1. 课程

| 数据项名   | 数据类型 | 长度 | 完整性约束      | 备注 |
| ---------- | -------- | ---- | --------------- | ---- |
| 课程编号   | nvarchar | 5    | 主键，唯一,非空 |      |
| 课程名称   | nvarchar | 20   | 非空            |      |
| 学时       | int      | 4    | 非空            |      |
| 考试或考查 | bit      | 1    | 非空            |      |
| 学分       | float    | 4    | 非空            |      |

1. 教师

| 数据项名 | 数据类型 | 长度 | 完整性约束       | 备注 |
| -------- | -------- | ---- | ---------------- | ---- |
| 教师编号 | nvarchar | 5    | 主键，唯一，非空 |      |
| 姓名     | nvarchar | 20   | 非空             |      |
| 性别     | nvarchar | 1    | 非空             |      |
| 年龄     | int      | 4    | 非空             |      |
| 职称     | nvarchar | 10   | 非空             |      |
| 电话     | nvarchar | 20   | 非空             |      |
| 登录密码 | nvarchar | 20   | 非空             |      |

1. 开课选课情况

| 数据项名     | 数据类型 | 长度 | 完整性约束       | 备注 |
| ------------ | -------- | ---- | ---------------- | ---- |
| 开课编号     | nvarchar | 15   | 主键，唯一，非空 |      |
| 课程编号     | nvarchar | 5    | 外键，非空       |      |
| 任课教师编号 | nvarchar | 5    | 外键，非空       |      |
| 开课学年     | nvarchar | 4    | 非空             |      |
| 开课学期     | bit      | 1    | 非空             |      |

1. 选课情况

| 数据项名 | 数据类型 | 长度 | 完整性约束           | 备注 |
| -------- | -------- | ---- | -------------------- | ---- |
| 开课编号 | nvarchar | 15   | 联合主键，也均为外键 |      |
| 学号     | nvarchar | 12   |                      |      |
| 成绩     | int      | 4    |                      |      |